<%@ page contentType="text/html;charset=UTF-8" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<c:set var="ctx" value="${pageContext.request.contextPath}"/>

<div class="main-variants py-4">

  <div class="mb-4 d-flex flex-wrap gap-3">
    <a href="${ctx}/vendor/products" class="btn btn-primary">üõçÔ∏è Qu·∫£n l√Ω s·∫£n ph·∫©m</a>
    <a href="${ctx}/vendor/orders" class="btn btn-success">üì¶ ƒê∆°n h√†ng</a>
    <c:if test="${not empty shop and not empty shop.shopId}">
      <a href="${ctx}/chat?shopId=${shop.shopId}" class="btn btn-chat">üí¨ Chat n·ªôi b·ªô</a>
      <a href="${ctx}/chat/public?shopId=${shop.shopId}" class="btn btn-chat">üí¨ Chat c√¥ng khai</a>
    </c:if>
  </div>

  <h2 class="mb-3 gradient-text">Bi·∫øn th·ªÉ s·∫£n ph·∫©m: ${product.productName}</h2>

  <div class="card kpi-card mb-4">
    <div class="card-body">
      <h5 class="card-title">Th√™m bi·∫øn th·ªÉ</h5>
      <form method="post" enctype="multipart/form-data" class="row g-3 mt-2">
        <input type="hidden" name="productId" value="${product.productId}"/>
        <div class="col-md-2">
          <input type="text" name="size" class="form-control" placeholder="Size" required>
        </div>
        <div class="col-md-3">
          <input type="text" name="color" class="form-control" placeholder="M√†u s·∫Øc" required>
        </div>
        <div class="col-md-2">
          <input type="number" name="stock" class="form-control" placeholder="T·ªìn kho">
        </div>

        <div class="col-md-3">
          <input type="file" name="variantImage" accept=".jpg,.jpeg,.png,.webp,image/*" class="form-control"/>
          <small class="text-muted">Ch·ªçn 1 ·∫£nh (‚â§ 2MB) ‚Äî ·∫£nh thumbnail c·ªßa bi·∫øn th·ªÉ.</small>
        </div>

        <div class="col-md-2">
          <button class="btn btn-primary w-100">Th√™m</button>
        </div>
      </form>
    </div>
  </div>


  <div class="card recent-orders-card">
    <div class="card-body">
      <h5 class="card-title">Danh s√°ch bi·∫øn th·ªÉ</h5>
      <table class="table align-middle table-hover">
        <thead>
        <tr>
          <th>#</th>
          <th>Size</th>
          <th>M√†u</th>
          <th>T·ªìn kho</th>
          <th>·∫¢nh</th>
          <th>Thao t√°c</th>
        </tr>
        </thead>
        <tbody>
        <c:forEach var="v" items="${variants}">
          <tr>
            <td>${v.variantId}</td>
            <td>${v.size}</td>
            <td>${v.color}</td>
            <td>${v.stock}</td>
            <td>
              <c:choose>
                <c:when test="${not empty v.imageUrl}">
                  <img src="${v.imageUrl}" alt="·∫£nh" width="70" class="rounded shadow-sm"/>
                </c:when>
                <c:otherwise>
                  <span class="text-muted">Kh√¥ng c√≥ ·∫£nh</span>
                </c:otherwise>
              </c:choose>
            </td>
            
            <td class="product-actions">
              <a href="${ctx}/vendor/product/variant/delete?id=${v.variantId}&productId=${product.productId}"
                 class="btn btn-sm btn-outline-danger">X√≥a</a>
            </td>
          </tr>
        </c:forEach>
        </tbody>
      </table>
    </div>
  </div>
  
</div>